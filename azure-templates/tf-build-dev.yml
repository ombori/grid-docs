jobs:
  - job: "BuildDev"
    condition: eq(variables['Build.SourceBranch'], 'refs/heads/dev')
  steps:
    - task: ArchiveFiles@2
      inputs:
        rootFolderOrFile: '$(build.sourcesDirectory)'
        includeRootFolder: false
        archiveFile: "$(Build.ArtifactStagingDirectory)/$(Build.BuildId)-dev.zip"
        replaceExistingArchive: true
    - task: PublishBuildArtifacts@1
      inputs:
        pathtoPublish: "$(Build.ArtifactStagingDirectory)/$(Build.BuildId)-dev.zip"
        artifactName: "build-dev"
        publishLocation: "Container"
    - job: approve
      displayName: Approve
      dependsOn: plan
      condition: succeeded()
      pool: server
      steps:
      - template: tf-approve.yml